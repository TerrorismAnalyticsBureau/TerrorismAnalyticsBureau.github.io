<!doctype html>
<html>
    <head>
        <title>TAB</title>
    </head>
<body>
<h1>Terrorism Analytics Bureau</h1>
<div><iframe title="TAB1" width=100% height="541.25" src="https://app.powerbi.com/reportEmbed?reportId=a82dfeb0-37ad-40c0-b8f3-da1d80de319d&autoAuth=true&ctid=45f26ee5-f134-439e-bc93-e6c7e33d61c2" frameborder="0" allowFullScreen="true"></iframe></div>

<div>AI output: <div id="output"></div> </div>
    

    <script>
            var responseClone;
        
            fetch('https://choice-mudfish-excited.ngrok-free.app/execute')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    responseClone = response.clone();
                    return response.json();
                })
                .then(data => {
                    console.log(data); 
                    document.getElementById('output').innerText = data.output;
                }), (rejectionReason => {
                    console.log('Error parsing JSON from response:', rejectionReason, responseClone); // 4
                    responseClone.text() // 5
                }
                .catch(error => {
                    console.log('Received the following instead of valid JSON:', bodyText); // 6
                    console.error('Error:', error);
                    document.getElementById('output').innerText = 'Error fetching data';
                });
    </script>
</body>
</html>
